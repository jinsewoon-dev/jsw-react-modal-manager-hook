"use strict";var O=Object.create;var M=Object.defineProperty;var N=Object.getOwnPropertyDescriptor;var h=Object.getOwnPropertyNames;var y=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty;var V=(o,r)=>{for(var e in r)M(o,e,{get:r[e],enumerable:!0})},x=(o,r,e,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of h(r))!E.call(o,n)&&n!==e&&M(o,n,{get:()=>r[n],enumerable:!(t=N(r,n))||t.enumerable});return o};var B=(o,r,e)=>(e=o!=null?O(y(o)):{},x(r||!o||!o.__esModule?M(e,"default",{value:o,enumerable:!0}):e,o)),A=o=>x(M({},"__esModule",{value:!0}),o);var T={};V(T,{BasicModalContainer:()=>p,ModalProvider:()=>R,useModal:()=>C});module.exports=A(T);var I=require("react"),S=require("react");var a=B(require("react"),1);var w=()=>crypto.randomUUID();var D=(o=0)=>{let[r,e]=(0,a.useState)([]),t=(0,a.useRef)({}),n=(0,a.useCallback)((l,i)=>{let d=w(),c=i?.onClose,k=a.default.cloneElement(l,{onClose:c});e(v=>[...v,{id:d,component:k,isVisible:!0,config:{useDim:i?.useDim??s.useDim,allowDimClickClose:i?.allowDimClickClose??s.allowDimClickClose,allowBackgroundScroll:i?.allowBackgroundScroll??s.allowBackgroundScroll},onClose:c}])},[]),u=(0,a.useCallback)(()=>{e(l=>{if(l.length===0)return l;let i=l.map((d,c)=>c===l.length-1?{...d,isVisible:!1}:d);if(o>0){let d=l[l.length-1]?.id;d&&(t.current[d]=setTimeout(()=>{e(c=>c.filter(k=>k.id!==d)),delete t.current[d]},o))}else return i.filter((d,c)=>c!==i.length-1);return i})},[o]),g=(0,a.useCallback)(()=>{e(l=>l.map(i=>({...i,isVisible:!1}))),o>0?setTimeout(()=>{e([])},o):e([])},[o]);return(0,a.useEffect)(()=>()=>{Object.keys(t.current).forEach(l=>{clearTimeout(t.current[l])})},[]),{modals:r,openModal:n,closeModal:u,closeAllModals:g}};var f=require("react/jsx-runtime"),P=(0,I.createContext)(null),s={baseZindex:1e4,useDim:!0,allowDimClickClose:!0,allowBackgroundScroll:!0,dimBackgroundColor:"rgba(0,0,0,0.5)",cleanupDelay:300},R=({children:o,customModalContainer:r,initialConfig:e=s})=>{let{modals:t,openModal:n,closeModal:u,closeAllModals:g}=D(e.cleanupDelay??s.cleanupDelay);return(0,f.jsxs)(P.Provider,{value:{modals:t,openModal:n,closeModal:u,closeAllModals:g},children:[r??(0,f.jsx)(p,{initialConfig:{useDim:e.useDim??s.useDim,allowDimClickClose:e.allowDimClickClose??s.allowDimClickClose,allowBackgroundScroll:e.allowBackgroundScroll??s.allowBackgroundScroll,dimBackgroundColor:e.dimBackgroundColor??s.dimBackgroundColor,baseZindex:e.baseZindex??s.baseZindex}}),o]})},C=()=>{let o=(0,S.useContext)(P);if(!o)throw new Error("useModal must be used within a ModalProvider");return o};var b=B(require("./BasicModalContainer.module.module.css"),1),m=require("react/jsx-runtime"),p=({initialConfig:o})=>{let{modals:r,closeModal:e}=C();return(0,m.jsx)(m.Fragment,{children:r.map((t,n)=>(0,m.jsx)("div",{className:`${t.isVisible?b.default.fadeIn:b.default.fadeOut}`,style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:t.config.useDim?o.dimBackgroundColor:"transparent",zIndex:o.baseZindex+n,pointerEvents:t.isVisible?"auto":"none"},onClick:u=>t.config.allowDimClickClose??o.allowDimClickClose?e():u.preventDefault(),children:(0,m.jsx)("div",{style:{pointerEvents:t.isVisible?"auto":"none"},onClick:u=>u.stopPropagation(),children:t.component})},t.id))})};0&&(module.exports={BasicModalContainer,ModalProvider,useModal});
//# sourceMappingURL=index.cjs.map